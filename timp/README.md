Технологии и методы программирования

main.cpp - реализация программы lock (часть а)
kitten.html - пример сайта с внедренным скриптом (задание б)
(todo: реализовать наследование, чтобы при переходе на другую страницу по ссылке в html внедрялся скрипт) 

Часть А

Описание программы.
Программа написана под операционную систему Linux. При установке программа требует наличия прав root для установки битов setuid и setgid и выполнения от root соответственно. Она устанавливается в директорию, которую необходимо защитить. Работа программы тесно связана с файлом template.tbl. Вы можете создать его вручную, поместив в первую строку хеш пароля, во вторую шаблон*, а дальше – имена файлов, которые вы хотите защитить от изменений. Иначе файл создастся программно при первом запуске. Запуск программы производится при помощи команды 
./lock init
Если файл template.tbl не присутствует в директории, у пользователя спрашивают шаблон и пароль, которые записываются в файл.

После запуска программы через init невозможно модифицировать, удалять, переименовывать и просматривать файлы, подходящие под шаблон или записанные в файле напрямую. При создании файла, подходящего маске, на него сразу же накладываются все вышеописанные ограничения. 
Чтобы добавить файл (или имя файла) под контроль программы используйте команду
./lock add <filename1> …

Если данный файл существует в директории, он будет закрыт сразу же. В противном случае, вы будете уведомлены о том, что сейчас защищать нечего, но при создании файла с таким именем, он сразу же будет защищен. 
Чтобы снять защиту с директории используйте
./lock close <password>

При правильном пароле защита снимется, и всем файлам вернутся их исходные флаги и права. 
Программа может быть запущена много раз. Однако избегайте применения нескольких init подряд. В случае, если вы все-таки так сделали, запустите close несколько раз.

*шаблон – регулярное выражение

Часть Б

Описание программы.
Скрипт необходимо внедрить в тело html (после тега <body>) в его исходном состоянии, без изменений. Скрипт предотвращает выделение, копирование и вызов контекстного меню. Сделать скриншот также невозможно. При попытке обмануть страницу, например, при уменьшении размера окна и фокусе на другом окне, текст и изображения замыливаются. Чтобы вернуть чистый вид страницы, нажмите на нее в любом месте. 

Чтобы снять защиту нажмите кнопку “esc” и введите пароль. При введении правильного пароля защита снимается автоматически. В противном случае вы получите уведомление.

Чтобы поставить защиту обратно нажмите “esc” и введите пароль или перезагрузите страницу. 
